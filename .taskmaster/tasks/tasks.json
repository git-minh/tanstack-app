{
  "master": {
    "tasks": [
      {
        "id": 1,
        "title": "Backend - Azure OpenAI Integration Action",
        "description": "Create Convex action to integrate with Azure OpenAI GPT-5 API for project generation",
        "status": "done",
        "priority": "critical",
        "dependencies": [
          "2"
        ],
        "details": "Implement the core Convex action (ai.ts) that calls Azure OpenAI API with structured prompts, parses responses, and orchestrates batch creation of projects, tasks, and contacts. This is the foundation of the entire AI generation feature.",
        "testStrategy": "Unit tests for API call logic, response parsing, and error handling. Mock Azure OpenAI responses for testing.",
        "subtasks": [
          {
            "id": 1,
            "title": "Create ai.ts file with generateProject action structure",
            "description": "Set up the basic Convex action file with proper imports and action definition",
            "status": "done",
            "details": "Import action, v from convex. Define generateProject action with prompt argument. Add user authentication check using ctx.auth.getUserIdentity().",
            "testStrategy": "Verify action is callable and requires authentication"
          },
          {
            "id": 2,
            "title": "Implement Azure OpenAI API call function",
            "description": "Create callAzureOpenAI helper function that makes HTTP requests to Azure OpenAI",
            "status": "done",
            "details": "Use native fetch to call Azure OpenAI endpoint. Include proper headers (api-key, Content-Type). Handle response_format: json_object for structured output. Set temperature: 0.7, max_tokens: 4000.",
            "testStrategy": "Test with mock responses. Verify error handling for API failures."
          },
          {
            "id": 3,
            "title": "Design and implement AI prompt templates",
            "description": "Create system and user prompt templates for project generation",
            "status": "done",
            "details": "System prompt: Define AI role as project management expert. Specify JSON schema for output. Include generation rules for projects, tasks, contacts. User prompt: Include user description, current date, timezone context.",
            "testStrategy": "Test prompts with various project descriptions. Validate JSON schema compliance."
          },
          {
            "id": 4,
            "title": "Implement response parsing with Zod validation",
            "description": "Create parseAndValidateAIResponse function with strict schema validation",
            "status": "done",
            "details": "Define Zod schema matching AI output structure. Parse JSON string. Validate all required fields. Handle validation errors gracefully with clear messages.",
            "testStrategy": "Test with valid and invalid JSON. Verify all edge cases are handled."
          },
          {
            "id": 5,
            "title": "Implement batch creation logic with hierarchy handling",
            "description": "Create project, then tasks (respecting parent-child), then contacts in sequence",
            "status": "done",
            "details": "1. Call api.projects.create with project data. 2. Create parent tasks first, store IDs in Map. 3. Create subtasks with parentTaskId references. 4. Create all contacts. 5. Link all tasks to project via projectId.",
            "testStrategy": "Test with nested task hierarchies. Verify all relationships are correct."
          },
          {
            "id": 6,
            "title": "Add comprehensive error handling and recovery",
            "description": "Implement try-catch blocks, error messages, and partial failure handling",
            "status": "done",
            "details": "Wrap API calls in try-catch. Log errors for debugging. Track created item IDs for rollback. Return meaningful error messages to frontend. Handle rate limits and timeouts.",
            "testStrategy": "Test various failure scenarios. Verify error messages are user-friendly."
          },
          {
            "id": 7,
            "title": "Implement rollback/cleanup mechanism for partial failures",
            "description": "Create cleanup logic to remove partially created items when generation fails midway",
            "details": "Track all created IDs (projectId, taskIds[], contactIds[]) during batch creation. Implement deleteCreatedItems() helper that removes all items if an error occurs. Wrap batch creation in try-catch and call cleanup on failure. Test with simulated failures at different stages.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 1
          },
          {
            "id": 8,
            "title": "Create ai-schema.ts for AI response validation",
            "description": "Define Zod schemas for validating Azure OpenAI responses in a separate schema file",
            "details": "Create packages/backend/convex/ai-schema.ts. Define schemas: aiProjectResponseSchema (includes project, tasks[], contacts[]). Define individual schemas: projectSchema, taskSchema, contactSchema. Export TypeScript types for use in ai.ts. This separates validation logic from action logic for better maintainability.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 1
          },
          {
            "id": 9,
            "title": "Define standardized error response format",
            "description": "Create consistent error response structure for frontend error handling",
            "details": "Define error response type: { success: false, error: { code: string, message: string, details?: any } }. Create helper function formatError(error: Error): ErrorResponse. Map different error types (API errors, validation errors, auth errors) to specific error codes. Document error codes for frontend consumption. Ensure all thrown errors follow this format.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 1
          }
        ]
      },
      {
        "id": 2,
        "title": "Backend - Environment Configuration",
        "description": "Set up Azure OpenAI environment variables in Convex",
        "status": "done",
        "priority": "critical",
        "dependencies": [],
        "details": "Configure the three required environment variables for Azure OpenAI access: AZURE_OPENAI_ENDPOINT, AZURE_OPENAI_KEY, and AZURE_OPENAI_DEPLOYMENT. These must be set via Convex CLI for production and optionally in local .env for development.",
        "testStrategy": "Verify variables are accessible in Convex action. Test with both production and development configurations.",
        "subtasks": [
          {
            "id": 1,
            "title": "Set production environment variables via Convex CLI",
            "description": "Run npx convex env set commands for all three Azure OpenAI variables",
            "status": "done",
            "details": "Commands: npx convex env set AZURE_OPENAI_ENDPOINT, npx convex env set AZURE_OPENAI_KEY, npx convex env set AZURE_OPENAI_DEPLOYMENT. Use actual Azure resource values.",
            "testStrategy": "Verify variables with npx convex env list"
          },
          {
            "id": 2,
            "title": "Add development .env configuration (optional)",
            "description": "Create .env file in packages/backend for local development",
            "status": "done",
            "details": "Add AZURE_OPENAI_ENDPOINT, AZURE_OPENAI_KEY, AZURE_OPENAI_DEPLOYMENT to packages/backend/.env.local. Document in ENVIRONMENT.md.",
            "testStrategy": "Test local development server can access variables"
          },
          {
            "id": 3,
            "title": "Document environment setup in docs/ENVIRONMENT.md",
            "description": "Add Azure OpenAI configuration section to environment documentation",
            "status": "done",
            "details": "Document all three variables, how to obtain them from Azure portal, and setup steps. Include troubleshooting section.",
            "testStrategy": "Follow documentation to verify completeness"
          }
        ]
      },
      {
        "id": 3,
        "title": "Frontend - AI Generation Dialog Component",
        "description": "Create the modal dialog component for AI project generation with form and loading states",
        "status": "done",
        "priority": "high",
        "dependencies": [],
        "details": "Build a React component using shadcn/ui Dialog that accepts project descriptions via textarea. Include form validation with React Hook Form + Zod, loading states with spinner, and proper error handling. Follow existing dialog patterns from task-form-dialog.tsx.",
        "testStrategy": "Component tests for rendering, form validation, loading states, and error display. Integration tests for dialog open/close behavior.",
        "subtasks": [
          {
            "id": 1,
            "title": "Create feature directory structure",
            "description": "Set up ai-generation feature folder with components, data, and hooks subdirectories",
            "status": "done",
            "details": "Create: apps/web/src/features/ai-generation/components/, apps/web/src/features/ai-generation/data/, apps/web/src/features/ai-generation/hooks/",
            "testStrategy": "Verify folder structure matches project conventions"
          },
          {
            "id": 2,
            "title": "Create Zod schema for form validation",
            "description": "Define generateProjectFormSchema in data/schema.ts with proper validation rules",
            "status": "done",
            "details": "Schema: prompt field, string type, min 20 chars, max 2000 chars. Export TypeScript type. Include helpful error messages.",
            "testStrategy": "Test schema with valid/invalid inputs. Verify error messages."
          },
          {
            "id": 3,
            "title": "Build GenerateDialog component with form",
            "description": "Create dialog component with textarea, buttons, and React Hook Form integration",
            "status": "done",
            "details": "Use shadcn Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription. Add Textarea (8 rows), Label, help text. Integrate useForm with zodResolver. Add Cancel and Generate buttons.",
            "testStrategy": "Test form submission, validation errors, button states"
          },
          {
            "id": 4,
            "title": "Implement loading state UI",
            "description": "Add loading spinner and progress message when AI is generating",
            "status": "done",
            "details": "Show Loader2 icon with spin animation. Display messages: 'AI is analyzing your project...' and 'This usually takes 10-30 seconds'. Replace form content during loading.",
            "testStrategy": "Verify loading state appears immediately on submit"
          },
          {
            "id": 5,
            "title": "Add error handling and success feedback",
            "description": "Implement toast notifications for success and error states",
            "status": "done",
            "details": "Use sonner toast.success for successful generation (show counts). Use toast.error for failures (show error message). Keep dialog open on error, close on success after 500ms.",
            "testStrategy": "Test both success and error scenarios"
          }
        ]
      },
      {
        "id": 4,
        "title": "Frontend - Dashboard Integration",
        "description": "Add 'Generate Project with AI' button to dashboard and wire up dialog",
        "status": "done",
        "priority": "high",
        "dependencies": [
          "1",
          "3"
        ],
        "details": "Modify the dashboard route to include a prominent button in the header that opens the AI generation dialog. Include proper state management for dialog visibility and action calling with loading/error states.",
        "testStrategy": "E2E test: Click button → Dialog opens → Enter description → Submit → Verify success. Test error scenarios.",
        "subtasks": [
          {
            "id": 1,
            "title": "Add Generate button to dashboard header",
            "description": "Modify dashboard.tsx to include button with Sparkles icon",
            "status": "done",
            "details": "Add Button component next to dashboard title. Use Sparkles icon from lucide-react. Label: 'Generate Project with AI'. Primary variant.",
            "testStrategy": "Visual test: Button appears in correct position with icon"
          },
          {
            "id": 2,
            "title": "Add dialog state management",
            "description": "Create useState for dialog open/close and wire up to button",
            "status": "done",
            "details": "const [generateDialogOpen, setGenerateDialogOpen] = useState(false). Button onClick sets to true. Pass to GenerateDialog component.",
            "testStrategy": "Test dialog opens on button click, closes on cancel"
          },
          {
            "id": 3,
            "title": "Implement handleGenerate callback",
            "description": "Create async function that calls Convex action and handles responses",
            "status": "done",
            "details": "Use useAction hook to get generateProject function. Implement try-catch. Show success toast with project name and counts. Show error toast on failure. Re-throw error for dialog handling.",
            "testStrategy": "Test success and error flows with mock action"
          },
          {
            "id": 4,
            "title": "Import and render GenerateDialog component",
            "description": "Add GenerateDialog to dashboard JSX with proper props",
            "status": "done",
            "details": "Import GenerateDialog. Add before closing tag of component. Pass open, onOpenChange, and onGenerate props.",
            "testStrategy": "Verify dialog renders and functions correctly"
          }
        ]
      },
      {
        "id": 5,
        "title": "Testing - Unit Tests for Backend",
        "description": "Write comprehensive unit tests for AI action and helper functions",
        "status": "done",
        "priority": "medium",
        "dependencies": [
          "1"
        ],
        "details": "Create test suite for packages/backend/convex/ai.ts covering response parsing, error handling, hierarchy logic, and batch creation. Use mocks for API calls and database operations.",
        "testStrategy": "Achieve >80% code coverage for ai.ts. Test all error paths and edge cases.",
        "subtasks": [
          {
            "id": 1,
            "title": "Set up test file and mocking infrastructure",
            "description": "Create ai.test.ts with proper mocks for Convex context and Azure API",
            "status": "done",
            "details": "Mock ctx.auth, ctx.runMutation, fetch for Azure API. Set up test data fixtures for valid/invalid responses.",
            "testStrategy": "Verify mocks work correctly"
          },
          {
            "id": 2,
            "title": "Test AI response parsing with valid data",
            "description": "Test parseAndValidateAIResponse with various valid JSON structures",
            "status": "done",
            "details": "Test: minimal valid response, full response with all optional fields, nested tasks with parents, multiple contacts.",
            "testStrategy": "All valid structures should parse successfully"
          },
          {
            "id": 3,
            "title": "Test AI response parsing with invalid data",
            "description": "Test error handling for malformed, incomplete, or invalid responses",
            "status": "done",
            "details": "Test: invalid JSON, missing required fields, wrong types, invalid enum values, circular task references.",
            "testStrategy": "All invalid inputs should throw descriptive errors"
          },
          {
            "id": 4,
            "title": "Test batch creation logic and hierarchy",
            "description": "Test that projects, tasks, and contacts are created in correct order with relationships",
            "status": "done",
            "details": "Test: parent tasks created before subtasks, all tasks linked to project, taskIdMap maintains correct references, contacts created independently.",
            "testStrategy": "Verify mutation call order and arguments"
          },
          {
            "id": 5,
            "title": "Test error handling and edge cases",
            "description": "Test API failures, partial creation failures, authentication errors",
            "status": "done",
            "details": "Test: Azure API timeout, invalid API key, mutation failures midway, unauthenticated user.",
            "testStrategy": "All errors should be caught and return meaningful messages"
          }
        ]
      },
      {
        "id": 6,
        "title": "Testing - Frontend Component Tests",
        "description": "Write unit and integration tests for AI generation dialog component",
        "status": "done",
        "priority": "medium",
        "dependencies": [
          "3"
        ],
        "details": "Create test suite for GenerateDialog component covering rendering, form validation, user interactions, loading states, and error handling. Use React Testing Library and Vitest.",
        "testStrategy": "Achieve >80% component coverage. Test all user interaction flows.",
        "subtasks": [
          {
            "id": 1,
            "title": "Test dialog rendering and form elements",
            "description": "Test that dialog renders correctly with all form elements present",
            "status": "done",
            "details": "Test: title appears, description appears, textarea is present, buttons are present, help text is visible.",
            "testStrategy": "Snapshot test and element query tests"
          },
          {
            "id": 2,
            "title": "Test form validation rules",
            "description": "Test minimum/maximum character validation and error messages",
            "status": "done",
            "details": "Test: empty submission shows error, <20 chars shows min error, >2000 chars shows max error, valid input passes.",
            "testStrategy": "Use user-event to type and submit"
          },
          {
            "id": 3,
            "title": "Test loading state transitions",
            "description": "Test that loading UI appears during submission",
            "status": "done",
            "details": "Test: form hides during loading, spinner appears, loading message displays, buttons are disabled.",
            "testStrategy": "Mock async onGenerate function"
          },
          {
            "id": 4,
            "title": "Test success and error flows",
            "description": "Test dialog behavior on successful and failed generation",
            "status": "done",
            "details": "Test: successful generation closes dialog and resets form, error keeps dialog open, error displays error state.",
            "testStrategy": "Mock onGenerate to resolve/reject"
          }
        ]
      },
      {
        "id": 7,
        "title": "Testing - E2E Integration Tests",
        "description": "Create end-to-end tests for complete AI generation workflow",
        "status": "pending",
        "priority": "medium",
        "dependencies": [
          "4"
        ],
        "details": "Write E2E tests that cover the full user journey from clicking the generate button to seeing created projects/tasks/contacts in the database. Use real Convex instance with test data.",
        "testStrategy": "Test complete happy path and error scenarios. Verify database state after generation.",
        "subtasks": [
          {
            "id": 1,
            "title": "Set up E2E test environment",
            "description": "Configure test Convex instance and E2E test utilities",
            "status": "pending",
            "details": "Set up separate Convex dev deployment for testing. Configure test authentication. Set up cleanup utilities.",
            "testStrategy": "Verify test environment is isolated"
          },
          {
            "id": 2,
            "title": "Test happy path: Simple project generation",
            "description": "E2E test for generating a simple project with tasks and contacts",
            "status": "pending",
            "details": "Test flow: Navigate to dashboard → Click Generate button → Enter simple description → Submit → Verify success toast → Check projects page → Verify tasks page → Verify contacts page.",
            "testStrategy": "All generated items should appear in database and UI"
          },
          {
            "id": 3,
            "title": "Test complex project with hierarchy",
            "description": "E2E test for generating project with nested tasks",
            "status": "pending",
            "details": "Test: Enter complex description with multiple phases → Verify parent tasks created → Verify subtasks linked correctly → Verify task hierarchy displays properly.",
            "testStrategy": "Navigate to tasks page and verify tree structure"
          },
          {
            "id": 4,
            "title": "Test error scenarios and validation",
            "description": "E2E tests for various error conditions",
            "status": "pending",
            "details": "Test: Empty form submission → Too short description → API failure handling → Network error handling.",
            "testStrategy": "Verify error messages and dialog state"
          },
          {
            "id": 5,
            "title": "Smoke test: Basic backend-frontend integration",
            "description": "Quick integration test to verify backend action can be called from frontend before full E2E testing",
            "details": "Test: 1) Frontend can successfully call api.ai.generateProject action. 2) Authentication token is passed correctly. 3) Backend returns expected response structure. 4) Basic error handling works (unauthenticated user, invalid prompt). This is a prerequisite sanity check before investing in full E2E test infrastructure.",
            "status": "pending",
            "dependencies": [],
            "parentTaskId": 7
          }
        ]
      },
      {
        "id": 8,
        "title": "Testing - Manual QA with Diverse Examples",
        "description": "Perform manual testing with various real-world project descriptions",
        "status": "pending",
        "priority": "low",
        "dependencies": [
          "7"
        ],
        "details": "Test the AI generation feature with 10+ diverse project types to ensure quality and appropriate task breakdown. Document results and edge cases discovered.",
        "testStrategy": "Create test matrix with different project types, sizes, and complexity levels.",
        "subtasks": [
          {
            "id": 1,
            "title": "Test software development projects",
            "description": "Test with web app, mobile app, and API projects",
            "status": "pending",
            "details": "Examples: SaaS application, mobile fitness app, REST API for e-commerce, microservices architecture.",
            "testStrategy": "Verify appropriate technical tasks and roles are generated"
          },
          {
            "id": 2,
            "title": "Test non-technical projects",
            "description": "Test with marketing, event planning, and business projects",
            "status": "pending",
            "details": "Examples: Product launch campaign, conference organization, business process improvement, hiring workflow.",
            "testStrategy": "Verify AI adapts to non-technical context appropriately"
          },
          {
            "id": 3,
            "title": "Test edge cases and unusual inputs",
            "description": "Test with minimal descriptions, vague prompts, and special characters",
            "status": "pending",
            "details": "Test: 20-character minimum, vague description ('do something'), special characters, non-English (if supported), very detailed description (2000 chars).",
            "testStrategy": "Document how AI handles edge cases"
          },
          {
            "id": 4,
            "title": "Create test report and document findings",
            "description": "Compile manual testing results into comprehensive report",
            "status": "pending",
            "details": "Document: Success rate, common issues found, quality of generated content, user experience feedback, recommendations for improvements.",
            "testStrategy": "Share report with team for review"
          }
        ]
      },
      {
        "id": 9,
        "title": "Documentation - Update CLAUDE.md",
        "description": "Add AI generation feature documentation to CLAUDE.md for future AI assistants",
        "status": "pending",
        "priority": "low",
        "dependencies": [
          "1",
          "4"
        ],
        "details": "Document the AI generation feature in CLAUDE.md including architecture, usage patterns, and implementation details so future Claude Code instances understand the feature.",
        "testStrategy": "Review documentation for completeness and accuracy.",
        "subtasks": [
          {
            "id": 1,
            "title": "Add AI Generation section to Architecture",
            "description": "Document Azure OpenAI integration and Convex action pattern",
            "status": "pending",
            "details": "Add section under 'Critical Integration Points' explaining AI action architecture, environment variables, and prompt engineering approach.",
            "testStrategy": "Verify technical accuracy"
          },
          {
            "id": 2,
            "title": "Document usage patterns and examples",
            "description": "Add code examples for using the AI generation feature",
            "status": "pending",
            "details": "Include: How to call the action, example prompts, expected response structure, error handling pattern.",
            "testStrategy": "Test code examples work correctly"
          },
          {
            "id": 3,
            "title": "Add troubleshooting section",
            "description": "Document common issues and solutions for AI generation",
            "status": "pending",
            "details": "Include: API key issues, timeout handling, response validation errors, partial creation failures.",
            "testStrategy": "Verify all documented issues have solutions"
          }
        ]
      },
      {
        "id": 10,
        "title": "Documentation - Update Environment Guide",
        "description": "Add Azure OpenAI configuration to docs/ENVIRONMENT.md",
        "status": "pending",
        "priority": "low",
        "dependencies": [
          "2"
        ],
        "details": "Update the environment documentation to include Azure OpenAI setup instructions, variable descriptions, and how to obtain credentials from Azure portal.",
        "testStrategy": "Follow documentation to verify setup process is clear.",
        "subtasks": [
          {
            "id": 1,
            "title": "Add Azure OpenAI section to ENVIRONMENT.md",
            "description": "Document all three required environment variables",
            "status": "pending",
            "details": "Add section: 'Azure OpenAI for AI Generation'. Document AZURE_OPENAI_ENDPOINT, AZURE_OPENAI_KEY, AZURE_OPENAI_DEPLOYMENT with descriptions and example values.",
            "testStrategy": "Verify formatting and completeness"
          },
          {
            "id": 2,
            "title": "Add Azure portal setup instructions",
            "description": "Document how to obtain credentials from Azure",
            "status": "pending",
            "details": "Step-by-step: Create Azure OpenAI resource → Deploy GPT-5 model → Get endpoint URL → Get API key → Configure deployment name.",
            "testStrategy": "Follow steps in Azure portal to verify accuracy"
          },
          {
            "id": 3,
            "title": "Add troubleshooting guide",
            "description": "Document common Azure OpenAI setup issues and solutions",
            "status": "pending",
            "details": "Cover: Invalid API key, wrong endpoint format, deployment not found, quota exceeded, region availability.",
            "testStrategy": "Test documented solutions"
          }
        ]
      },
      {
        "id": 11,
        "title": "Performance Optimization - Response Time Monitoring",
        "description": "Implement monitoring and logging for AI generation performance",
        "status": "pending",
        "priority": "low",
        "dependencies": [
          "1"
        ],
        "details": "Add timing logs to track API call duration, parsing time, and batch creation time. Log all requests for debugging and optimization. Monitor for performance issues.",
        "testStrategy": "Review logs to identify bottlenecks. Verify all stages are timed correctly.",
        "subtasks": [
          {
            "id": 1,
            "title": "Add timing instrumentation to action",
            "description": "Add console.log statements with timestamps for each major step",
            "status": "pending",
            "details": "Log: Start time, API call start/end, parsing start/end, project creation, task creation, contact creation, total time.",
            "testStrategy": "Review logs in Convex dashboard"
          },
          {
            "id": 2,
            "title": "Implement request/response logging",
            "description": "Log all AI requests and responses for debugging",
            "status": "pending",
            "details": "Log: User prompt, AI response (truncated if large), success/failure, error messages, generated item counts.",
            "testStrategy": "Verify logs contain useful debugging information"
          },
          {
            "id": 3,
            "title": "Add performance alerts for slow requests",
            "description": "Set up monitoring for requests exceeding 30 seconds",
            "status": "pending",
            "details": "Log warnings for slow AI calls. Track P50, P95, P99 response times. Consider adding Sentry or similar for alerting.",
            "testStrategy": "Trigger slow requests and verify alerts"
          }
        ]
      },
      {
        "id": 12,
        "title": "Production Readiness - Security Review and Launch Checklist",
        "description": "Complete security review, final testing, and pre-launch checklist",
        "status": "pending",
        "priority": "medium",
        "dependencies": [
          "8",
          "9",
          "10",
          "11"
        ],
        "details": "Perform comprehensive security review, validate all tests pass, ensure documentation is complete, and verify production environment is properly configured before launch.",
        "testStrategy": "Complete all items on launch checklist. Get approval from team.",
        "subtasks": [
          {
            "id": 1,
            "title": "Security review: Input validation and sanitization",
            "description": "Review all user inputs for proper validation and sanitization",
            "status": "pending",
            "details": "Check: Prompt length limits enforced, special characters handled, SQL injection prevention, XSS prevention, prompt injection awareness.",
            "testStrategy": "Attempt to bypass validation with malicious inputs"
          },
          {
            "id": 2,
            "title": "Security review: API key protection",
            "description": "Verify Azure OpenAI credentials are properly secured",
            "status": "pending",
            "details": "Check: Keys stored in Convex environment (not code), no keys in logs, no keys in error messages, keys not exposed to frontend.",
            "testStrategy": "Review all code paths that access API keys"
          },
          {
            "id": 3,
            "title": "Verify production environment configuration",
            "description": "Confirm all production environment variables are set correctly",
            "status": "pending",
            "details": "Verify in Convex production deployment: AZURE_OPENAI_ENDPOINT, AZURE_OPENAI_KEY, AZURE_OPENAI_DEPLOYMENT are all set and valid.",
            "testStrategy": "Test generation in production environment"
          },
          {
            "id": 4,
            "title": "Run full test suite and verify all pass",
            "description": "Execute all unit, integration, and E2E tests",
            "status": "pending",
            "details": "Run: pnpm test for frontend, backend unit tests, E2E test suite. All tests must pass.",
            "testStrategy": "Green test run with >80% coverage"
          },
          {
            "id": 5,
            "title": "Complete launch checklist and get team approval",
            "description": "Review final checklist with team and get sign-off to launch",
            "status": "pending",
            "details": "Checklist: All tests pass, documentation complete, security review done, monitoring set up, rollback plan documented, team trained.",
            "testStrategy": "Team meeting to review and approve launch"
          }
        ]
      },
      {
        "id": 13,
        "title": "Sentry Error Monitoring Integration",
        "description": "Implement comprehensive error tracking and performance monitoring with Sentry for the hackathon submission",
        "details": "Install @sentry/react and @sentry/vite-plugin. Initialize Sentry in router.tsx with browser tracing and session replay. Configure source map uploads. Set up VITE_SENTRY_DSN environment variable. Test error tracking and verify dashboard. Time estimate: 30 minutes. Priority 1 for hackathon.",
        "testStrategy": "Trigger intentional error and verify it appears in Sentry dashboard with correct source maps and user context",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "Install Sentry packages",
            "description": "Install @sentry/react and @sentry/vite-plugin in apps/web",
            "details": "Run: cd apps/web && pnpm add @sentry/react @sentry/vite-plugin",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 13
          },
          {
            "id": 2,
            "title": "Initialize Sentry in router.tsx",
            "description": "Configure Sentry SDK with browser tracing and session replay",
            "details": "Add Sentry.init() in apps/web/src/router.tsx with DSN, browserTracingIntegration, replayIntegration. Set tracesSampleRate: 1.0, replaysSessionSampleRate: 0.1, replaysOnErrorSampleRate: 1.0",
            "status": "done",
            "dependencies": [
              1
            ],
            "parentTaskId": 13
          },
          {
            "id": 3,
            "title": "Add Sentry Vite plugin for source maps",
            "description": "Configure sentryVitePlugin in vite.config.ts to upload source maps",
            "details": "Import sentryVitePlugin in apps/web/vite.config.ts. Add to plugins array with org, project, and authToken configuration. Enable source map generation in build options",
            "status": "done",
            "dependencies": [
              2
            ],
            "parentTaskId": 13
          },
          {
            "id": 4,
            "title": "Configure environment variables and test error tracking",
            "description": "Set up VITE_SENTRY_DSN and verify errors are captured in Sentry dashboard",
            "details": "Add VITE_SENTRY_DSN to .env.local. Get DSN from Sentry project settings. Trigger intentional error in dev environment. Verify error appears in Sentry dashboard with correct source maps, user context, and breadcrumbs",
            "status": "done",
            "dependencies": [
              3
            ],
            "parentTaskId": 13
          }
        ]
      },
      {
        "id": 14,
        "title": "Firecrawl Web Scraping Integration",
        "description": "Integrate Firecrawl to scrape websites and enhance AI project generation with web content",
        "details": "Install @firecrawl/firecrawl-node. Create scrapeUrl Convex action. Add \"Import from URL\" input to GenerateDialog. Implement URL validation and scraping flow. Append scraped markdown to AI prompts. Handle errors gracefully. Configure FIRECRAWL_API_KEY. Time estimate: 1.5-2 hours. Priority 2 for hackathon - highest impact for differentiation.",
        "testStrategy": "Test scraping GitHub READMEs, documentation sites, and blog posts. Verify scraped content enhances AI generation quality",
        "status": "done",
        "dependencies": [
          13
        ],
        "priority": "medium",
        "subtasks": [
          {
            "id": 1,
            "title": "Install Firecrawl package in backend",
            "description": "Add @firecrawl/firecrawl-node to backend dependencies",
            "details": "Run: cd packages/backend && pnpm add @firecrawl/firecrawl-node",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 14
          },
          {
            "id": 2,
            "title": "Create scrapeUrl Convex action",
            "description": "Add Firecrawl scraping action to packages/backend/convex/ai.ts",
            "details": "Create action scrapeUrl with url argument. Initialize FirecrawlApp with FIRECRAWL_API_KEY from env. Call scrapeUrl with formats: ['markdown', 'html']. Return markdown content. Handle errors (invalid URL, timeout, rate limit). Add 10,000 char limit on scraped content",
            "status": "done",
            "dependencies": [
              1
            ],
            "parentTaskId": 14
          },
          {
            "id": 3,
            "title": "Add URL input field to GenerateDialog",
            "description": "Update GenerateDialog component to include optional URL import feature",
            "details": "Add Input field for URL above the prompt textarea in apps/web/src/features/ai-generation/components/generate-dialog.tsx. Add label \"Import from URL (optional)\". Implement URL validation using Zod (must be valid HTTP/HTTPS). Add loading state indicator for scraping. Show character count preview after scraping",
            "status": "done",
            "dependencies": [
              2
            ],
            "parentTaskId": 14
          },
          {
            "id": 4,
            "title": "Integrate Firecrawl into AI generation flow",
            "description": "Connect URL scraping to AI generation and test end-to-end",
            "details": "When URL provided, call scrapeUrl action before generateProject. Append scraped markdown to user prompt with context like \"Content from [url]: \\n\\n[scraped content]\". Handle scraping errors gracefully with toast notifications. Test with GitHub READMEs, docs sites, blog posts. Configure FIRECRAWL_API_KEY in Convex environment",
            "status": "done",
            "dependencies": [
              3
            ],
            "parentTaskId": 14
          }
        ]
      },
      {
        "id": 15,
        "title": "Autumn Pricing and Billing Integration",
        "description": "Add subscription billing with usage-based limits for AI generation using Autumn",
        "details": "Install @autumnhq/autumn-js. Create pricing page with Free (5 generations) and Pro ($9/month unlimited) tiers. Add usage tracking to Convex. Implement checkout flow. Add upgrade prompts for free users at limit. Configure VITE_AUTUMN_API_KEY. Handle subscription webhooks. Time estimate: 1 hour. Priority 3 for hackathon.",
        "testStrategy": "Test checkout flow in test mode, verify usage limits enforced, confirm subscription status updates correctly",
        "status": "done",
        "dependencies": [
          14
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "Install Autumn package and create pricing page",
            "description": "Add Autumn billing SDK and create pricing page component",
            "details": "Run: cd apps/web && pnpm add @autumnhq/autumn-js. Create apps/web/src/routes/_authenticated/pricing.tsx with pricing tiers: Free (5 AI generations/month) and Pro ($9/month unlimited). Design pricing comparison table with feature lists and CTA buttons",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 15
          },
          {
            "id": 2,
            "title": "Add usage tracking to Convex",
            "description": "Create aiGenerations counter and usage query in Convex backend",
            "details": "Add aiGenerationCount field to users table in schema.ts. Create query getUserUsage returning current count and tier limit. Increment counter in generateProject action. Add subscription tier field to users (free/pro). Create mutation to update subscription status",
            "status": "done",
            "dependencies": [
              1
            ],
            "parentTaskId": 15
          },
          {
            "id": 3,
            "title": "Implement usage limits and upgrade prompts",
            "description": "Add usage limit checks and upgrade UI to GenerateDialog",
            "details": "Check usage before AI generation. Show upgrade prompt when free users hit 5 generation limit. Add \"Upgrade to Pro\" button in GenerateDialog for free users near limit. Integrate Autumn checkout session creation. Configure VITE_AUTUMN_API_KEY. Handle successful checkout redirect",
            "status": "done",
            "dependencies": [
              2
            ],
            "parentTaskId": 15
          }
        ]
      },
      {
        "id": 16,
        "title": "CodeRabbit Configuration",
        "description": "Properly configure CodeRabbit for AI-powered code reviews",
        "details": "Create .coderabbit.yml configuration file with auto_review enabled, request_changes_workflow, and chat auto_reply. Document setup in README.md and CLAUDE.md. Verify badge in README. Time estimate: 15 minutes. Priority 4 for hackathon.",
        "testStrategy": "Validate .coderabbit.yml syntax, verify configuration is properly documented",
        "status": "pending",
        "dependencies": [
          15
        ],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 17,
        "title": "Integration Testing and Quality Assurance",
        "description": "Test all sponsor integrations end-to-end and verify production readiness",
        "details": "Test Sentry error tracking, Firecrawl scraping with multiple URLs, Autumn checkout flow, CodeRabbit config. Test complete user flows: free user hitting limit, URL scraping to generation, error handling. Verify mobile responsiveness and accessibility. Check production environment variables. Time estimate: 45 minutes.",
        "testStrategy": "Execute test matrix covering all integrations individually and together. Verify no console errors, mobile-friendly UI, and accessible components",
        "status": "pending",
        "dependencies": [
          16
        ],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 18,
        "title": "Documentation Updates",
        "description": "Update all project documentation with new sponsor integrations",
        "details": "Update docs/ENVIRONMENT.md with VITE_SENTRY_DSN, FIRECRAWL_API_KEY, VITE_AUTUMN_API_KEY. Add sponsor integration section to CLAUDE.md. Update README.md with sponsor logos and descriptions. Create .env.example. Add troubleshooting sections. Document usage limits and best practices. Time estimate: 30 minutes.",
        "testStrategy": "Verify all environment variables documented, integration guides complete, troubleshooting sections added",
        "status": "pending",
        "dependencies": [
          17
        ],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 19,
        "title": "Production Deployment",
        "description": "Deploy all changes to production with proper environment configuration",
        "details": "Set Convex environment variables for Firecrawl using npx convex env set. Set Cloudflare environment variables for Sentry and Autumn using npx wrangler secret put. Verify CircleCI pipeline succeeds. Test all integrations in production. Monitor Sentry and Convex dashboards for errors. Ensure all API keys valid. Time estimate: 30 minutes.",
        "testStrategy": "Production smoke test: verify app deployed, all integrations working, no errors in monitoring dashboards, performance acceptable",
        "status": "pending",
        "dependencies": [
          18
        ],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 20,
        "title": "Video Demo Creation",
        "description": "Create compelling 2-3 minute demo video showcasing all features and integrations",
        "details": "Record screen at 1080p. Script covering: intro (15s), TanStack Start + Convex features (30s), sponsor integrations demo - Firecrawl scraping, Sentry errors, Autumn pricing (75s), unique AI value (15s), closing with links (15s). Edit for smooth flow. Add title cards. Upload to YouTube. Keep under 3 minutes. Time estimate: 1 hour recording + 30 min editing.",
        "testStrategy": "Review video for quality, verify all sponsor integrations shown, confirm under 3 minutes, test YouTube link works",
        "status": "pending",
        "dependencies": [
          19
        ],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 21,
        "title": "Vibe Apps Submission and Social Media Promotion",
        "description": "Submit app to Vibe Apps directory and promote on social media before deadline",
        "details": "Submit to Vibe Apps with compelling name, tagline, description highlighting all integrations. Add tags: tanstackstart, convex, ai, saas, cloudflare. Include GitHub URL, live demo URL, YouTube video link. Submit before Nov 17 12:00 PM PT. Post on Twitter/X and LinkedIn tagging all sponsors. Share in developer communities. Time estimate: 45 minutes total (15 min submission + 30 min social).",
        "testStrategy": "Verify submission confirmation received, social posts published with all sponsor tags, links working correctly",
        "status": "pending",
        "dependencies": [
          20
        ],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 22,
        "title": "Route-Level Code Splitting",
        "description": "Implement lazy loading for all authenticated routes to reduce initial bundle size by ~200 KB gzipped",
        "details": "Split application into route-specific chunks. Currently ALL routes load in main bundle (1,066 KB). Target: Each route as separate chunk (<50 KB each).\n\nSteps:\n1. Convert route components to lazy imports with React.lazy()\n2. Add Suspense boundaries with skeleton loaders (use existing dashboard patterns)\n3. Implement route prefetching for critical paths (dashboard, tasks)\n4. Test progressive loading without blocking\n\nExpected impact: 60% of total bundle size reduction (main: 330 KB → ~80 KB gzipped)",
        "testStrategy": "Measure bundle sizes before/after. Verify routes load progressively. Test navigation between routes. Run Lighthouse audit.",
        "status": "done",
        "dependencies": [],
        "priority": "medium",
        "subtasks": [
          {
            "id": 1,
            "title": "Create lazy loading pattern and utilities",
            "description": "Set up reusable lazy loading pattern with proper TypeScript types",
            "details": "Create apps/web/src/lib/lazy-route.ts with helper function for lazy loading routes. Include proper error boundaries and loading states. Pattern: export const lazyRoute = (importFn) => lazy(importFn);",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 22
          },
          {
            "id": 2,
            "title": "Convert dashboard route to lazy loading",
            "description": "Update dashboard route with React.lazy and Suspense boundary",
            "details": "Modify apps/web/src/routes/_authenticated/dashboard.tsx. Use lazy(() => import('@/features/dashboard')). Add Suspense with existing ChartSkeleton pattern. Test dashboard loads progressively.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 22
          },
          {
            "id": 3,
            "title": "Convert tasks, contacts, projects routes to lazy loading",
            "description": "Update all heavy routes with lazy loading pattern",
            "details": "Update routes: _authenticated/tasks.tsx (37 KB), _authenticated/contacts.tsx (24 KB), _authenticated/projects.tsx (19 KB). Use lazy imports. Add route-specific skeleton loaders. Test navigation between routes.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 22
          },
          {
            "id": 4,
            "title": "Implement route prefetching for critical paths",
            "description": "Add prefetch on hover for dashboard and tasks routes",
            "details": "Use TanStack Router's preload functionality. Prefetch on link hover in sidebar navigation. Preload dashboard on app mount for authenticated users. Test prefetching works without blocking.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 22
          },
          {
            "id": 5,
            "title": "Measure and verify bundle size reduction",
            "description": "Run production build and analyze bundle composition",
            "details": "Run: pnpm build. Compare bundle sizes before/after. Verify main.js reduced from 330 KB to ~80 KB gzipped. Verify route chunks are <50 KB each. Document results in PR description.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 22
          },
          {
            "id": 6,
            "title": "Run Lighthouse audit and measure Core Web Vitals",
            "description": "Verify performance improvements with Lighthouse and Web Vitals",
            "details": "Run: npx lighthouse https://your-app.com --view. Measure LCP, FID, CLS improvements. Test on 3G throttling. Verify Lighthouse score >90. Document metrics in docs/PERFORMANCE.md.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 22
          }
        ]
      },
      {
        "id": 23,
        "title": "Component-Level Code Splitting",
        "description": "Lazy load heavy components (forms, tables, dialogs) to reduce initial load by ~50 KB gzipped",
        "details": "Defer loading of non-critical components until they're actually needed.\n\nPriority components to lazy load:\n- Task/Contact/Project form dialogs (react-hook-form + Zod schemas)\n- TanStack Table components (37 KB + 24 KB + 19 KB)\n- AI generation dialog (only when button clicked)\n- Global search dialog (Cmd+K)\n\nPattern: const Component = lazy(() => import('@/features/...')); \nWrap with Suspense and skeleton loader.\n\nExpected impact: 15% bundle reduction, faster perceived performance",
        "testStrategy": "Verify components load on-demand. Test loading states. Measure Time to Interactive (TTI). Profile with React DevTools.",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "Lazy load form dialogs (Task, Contact, Project)",
            "description": "Convert form dialog components to lazy loading",
            "details": "Update: TaskFormDialog, ContactFormDialog, ProjectFormDialog. Pattern: const Dialog = lazy(() => import('@/features/tasks/components/task-form-dialog')). Only load when create/edit button clicked. Add loading spinner while form loads.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 23
          },
          {
            "id": 2,
            "title": "Lazy load TanStack Table components",
            "description": "Convert table components to lazy loading (37 KB + 24 KB + 19 KB)",
            "details": "Update: TasksTable, ContactsTable, ProjectsTable. Use lazy imports with Suspense. Add table skeleton loaders (rows with shimmer effect). Test table pagination and filtering still work.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 23
          },
          {
            "id": 3,
            "title": "Lazy load AI generation dialog",
            "description": "Defer GenerateDialog loading until button clicked",
            "details": "Update dashboard.tsx GenerateDialog import. Use lazy loading. Only load when 'Generate Project with AI' button clicked. Add small loading state on first open.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 23
          },
          {
            "id": 4,
            "title": "Lazy load global search dialog (Cmd+K)",
            "description": "Defer GlobalSearch component until keyboard shortcut triggered",
            "details": "Update global-search.tsx. Use lazy loading. Only load when Cmd/Ctrl+K pressed. Add 50ms delay indicator if needed. Test search functionality works correctly.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 23
          },
          {
            "id": 5,
            "title": "Create loading skeletons and test all lazy components",
            "description": "Add proper loading states and verify lazy loading works",
            "details": "Create skeleton components for forms and dialogs. Test each lazy loaded component renders correctly. Measure TTI improvement. Verify no JavaScript errors in console.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 23
          }
        ]
      },
      {
        "id": 24,
        "title": "Icon Optimization",
        "description": "Replace lucide-react bulk imports with dynamic imports to save ~20 KB gzipped",
        "details": "Currently importing 100+ icons from lucide-react upfront. Switch to granular imports.\n\nBefore: import { Check, X, Plus } from 'lucide-react';\nAfter: import Check from 'lucide-react/dist/esm/icons/check';\n\nOr use dynamic imports for non-critical icons:\nconst Icon = lazy(() => import('lucide-react/dist/esm/icons/settings'));\n\nExpected impact: 6% bundle reduction, faster initial parse",
        "testStrategy": "Search codebase for lucide-react imports. Replace systematically. Verify icons still render. Measure bundle size reduction.",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "Audit all lucide-react imports across codebase",
            "description": "Find all icon imports and categorize by usage frequency",
            "details": "Run: grep -r \"from 'lucide-react'\" apps/web/src. List all imported icons. Categorize: critical (used immediately), deferred (below fold), dynamic (conditionally rendered). Create spreadsheet or markdown file.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 24
          },
          {
            "id": 2,
            "title": "Replace bulk imports with granular imports for critical icons",
            "description": "Update imports for icons used in initial render",
            "details": "Replace: import { Check, X, Plus } from 'lucide-react'. With: import Check from 'lucide-react/dist/esm/icons/check'. Focus on icons in layouts, navigation, and above-the-fold content.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 24
          },
          {
            "id": 3,
            "title": "Implement dynamic imports for non-critical icons",
            "description": "Use lazy loading for icons in dialogs, modals, and below-fold content",
            "details": "For icons in forms, dialogs, settings: const SettingsIcon = lazy(() => import('lucide-react/dist/esm/icons/settings')). Wrap with Suspense or show fallback square while loading.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 24
          },
          {
            "id": 4,
            "title": "Verify icons render correctly and measure bundle reduction",
            "description": "Test all pages and measure icon optimization impact",
            "details": "Test every route to ensure icons display correctly. Check dialogs, forms, and interactive elements. Run pnpm build and compare bundle sizes. Target: ~20 KB reduction. Document savings.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 24
          }
        ]
      },
      {
        "id": 25,
        "title": "Vendor Bundle Optimization",
        "description": "Reduce vendor chunks by 40% through selective loading and alternatives",
        "details": "Current vendor sizes:\n- vendor-forms: 258 KB (react-hook-form + Zod)\n- vendor-charts: 243 KB (Recharts)\n- vendor-auth: 186 KB (Better-Auth)\n- vendor-ui: 100 KB (Radix UI)\n\nStrategies:\n1. Lazy load form libraries (only complex forms need RHF + Zod)\n2. Audit Recharts usage (already lazy loaded, but 243 KB is huge)\n3. Split auth bundle (only load on /login route)\n4. Remove unused Radix components and variants\n5. Split date-fns into separate chunk\n\nExpected impact: 30% additional reduction, faster route transitions",
        "testStrategy": "Analyze bundle composition. Test form functionality. Verify chart loads correctly. Measure vendor chunk sizes.",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "Analyze and lazy load form libraries (258 KB)",
            "description": "Split react-hook-form and Zod into separate chunks, load only for complex forms",
            "details": "Identify simple vs complex forms. Simple forms (login, search): use native useState. Complex forms (task/project creation): keep RHF + Zod but lazy load. Update Vite config to create vendor-forms chunk only loaded when needed.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 25
          },
          {
            "id": 2,
            "title": "Audit Recharts usage and consider lighter alternatives",
            "description": "Evaluate if 243 KB Recharts is necessary or can be replaced",
            "details": "Verify Recharts is already lazy loaded (good!). Count chart types used. Research alternatives: Chart.js (50 KB), visx (80 KB). Document decision: keep if critical, replace if savings worth migration effort.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 25
          },
          {
            "id": 3,
            "title": "Split auth bundle to only load on login route",
            "description": "Ensure Better-Auth (186 KB) only loads when needed",
            "details": "Update Vite config manualChunks. Create vendor-auth chunk. Verify auth components only load on _auth routes. Test authentication still works correctly. Measure bundle size improvement for authenticated routes.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 25
          },
          {
            "id": 4,
            "title": "Remove unused Radix UI components and variants",
            "description": "Audit and remove rarely-used UI primitives (100 KB → ~70 KB)",
            "details": "Search for unused Radix components: Tabs, RadioGroup, ToggleGroup, etc. Remove imports and component files if unused. Check if all component variants are needed. Update manual chunks to optimize Radix bundle.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 25
          },
          {
            "id": 5,
            "title": "Extract date-fns and optimize Vite manual chunks",
            "description": "Create separate chunk for date utilities and optimize all vendor chunks",
            "details": "Add date-fns to manual chunks in vite.config.ts. Optimize chunk splitting for AI generation features. Create chunks: vendor-dates, vendor-ai-generation. Test all chunks load correctly. Verify chunk sizes are 20-50 KB ideal range.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 25
          },
          {
            "id": 6,
            "title": "Measure vendor bundle optimization results",
            "description": "Verify 40% vendor chunk reduction achieved",
            "details": "Run production build. Compare before/after: vendor-forms (258→180 KB), vendor-charts (243 KB, already optimized), vendor-auth (186→130 KB), vendor-ui (100→70 KB). Document total savings and impact on load times.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 25
          }
        ]
      },
      {
        "id": 26,
        "title": "React Rendering Optimization",
        "description": "Implement memoization and virtual scrolling to improve runtime performance",
        "details": "Optimize React rendering to reduce unnecessary re-renders and improve perceived performance.\n\nKey optimizations:\n1. Wrap expensive table components with React.memo\n2. Implement virtual scrolling for tables with >50 rows (@tanstack/react-virtual)\n3. Memoize table columns and data transformations (useMemo)\n4. Debounce search/filter inputs (300ms)\n5. Throttle table updates (150ms)\n6. Split large contexts (LayoutProvider, ThemeProvider)\n7. Profile components with React DevTools Profiler\n\nExpected impact: Smoother interactions, faster table rendering, reduced CPU usage",
        "testStrategy": "Profile before/after with React DevTools. Test with large datasets (100+ items). Measure FPS during scrolling. Verify no functionality broken.",
        "status": "pending",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 27,
        "title": "Data Fetching Optimization",
        "description": "Optimize Convex queries with indexes, caching, and selective field loading",
        "details": "Improve data fetching performance with React Query + Convex.\n\nOptimizations:\n1. Verify all queries have proper indexes (by_userId, compound indexes)\n2. Configure staleTime: 5min for infrequently changing data\n3. Set cacheTime: 10min for expensive queries\n4. Implement optimistic updates for mutations\n5. Use selective field queries (don't over-fetch)\n6. Add route-level data prefetching\n7. Profile slow queries in Convex dashboard\n\nExpected impact: Faster page transitions, reduced server load, better perceived performance",
        "testStrategy": "Profile query performance in Convex dashboard. Test with network throttling. Verify cache invalidation works. Measure LCP improvement.",
        "status": "pending",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 28,
        "title": "Build Configuration Optimization",
        "description": "Enhance Vite config for optimal chunking and compression",
        "details": "Improve build output for better caching and loading.\n\nEnhancements:\n1. Create manual chunks for heavy features (AI generation, tables)\n2. Extract date-fns into separate chunk\n3. Split TanStack Router/Query into core chunk\n4. Optimize chunk sizes (20-50 KB ideal)\n5. Enable CSS minification and tree shaking\n6. Configure Brotli compression on Cloudflare Workers\n7. Add preload/prefetch hints for critical chunks\n\nExpected impact: Better caching, faster repeat visits, optimal resource loading",
        "testStrategy": "Analyze build output. Test cache invalidation. Measure repeat visit performance. Verify production builds.",
        "status": "pending",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 29,
        "title": "Performance Monitoring and CI Integration",
        "description": "Implement continuous performance monitoring to prevent regressions",
        "details": "Set up automated performance tracking and budgets.\n\nImplementation:\n1. Add web-vitals package to track Core Web Vitals\n2. Send metrics to Sentry performance monitoring\n3. Add Lighthouse CI to CircleCI pipeline\n4. Set performance budgets (main bundle <150 KB gzipped)\n5. Fail CI builds if budgets exceeded\n6. Add bundlesize or size-limit package\n7. Create docs/PERFORMANCE.md with metrics\n\nExpected impact: Prevent performance regressions, continuous improvement, data-driven optimization",
        "testStrategy": "Verify Web Vitals tracking in Sentry. Test Lighthouse CI integration. Confirm budget enforcement. Review performance dashboard.",
        "status": "pending",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 30,
        "title": "CSS and Style Optimization",
        "description": "Reduce CSS bundle size through Tailwind optimization and critical CSS extraction",
        "details": "Optimize CSS loading and reduce bundle size.\n\nOptimizations:\n1. Audit used Tailwind classes and purge unused\n2. Disable unused Tailwind features and plugins\n3. Extract critical CSS for above-the-fold content\n4. Inline critical CSS for first paint\n5. Defer loading of non-critical styles\n6. Analyze index.css for unused styles\n\nExpected impact: Faster First Contentful Paint (FCP), reduced style recalculation",
        "testStrategy": "Measure CSS bundle size. Test critical CSS extraction. Verify styles render correctly. Profile style recalculation.",
        "status": "pending",
        "dependencies": [],
        "priority": "low",
        "subtasks": []
      },
      {
        "id": 31,
        "title": "Advanced Performance Optimizations",
        "description": "Implement service worker caching, SSG, and progressive enhancement",
        "details": "Advanced techniques for edge performance.\n\nImplementations:\n1. Add Workbox for service worker generation\n2. Cache static assets (CSS, JS, fonts)\n3. Implement runtime caching for API responses\n4. Add offline fallback pages\n5. Implement SSG for marketing pages (pricing, landing)\n6. Optimize SSR hydration performance\n7. Consider partial hydration for heavy components\n\nExpected impact: Offline support, faster repeat visits, better reliability",
        "testStrategy": "Test offline functionality. Verify cache strategies. Measure hydration time. Test SSG pages load fast.",
        "status": "pending",
        "dependencies": [],
        "priority": "low",
        "subtasks": []
      },
      {
        "id": 32,
        "title": "Credit System Foundation",
        "description": "Extend userUsage table with credits, implement credit management backend, initialize credits on signup, and create credit balance UI component",
        "details": "Update convex/schema.ts to add creditsRemaining, creditsTotal, lastCreditReset. Create convex/credits.ts with getUserCredits query, deductCredits mutation, resetMonthlyCredits mutation. Initialize 100 credits for new users. Build credit-balance.tsx component for navbar with color-coded warnings.",
        "testStrategy": "Test credit initialization on signup, test atomic deduction, test monthly reset logic, verify UI displays correctly",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "Update userUsage schema with credit fields",
            "description": "Add creditsRemaining, creditsTotal, lastCreditReset to userUsage table in convex/schema.ts",
            "details": "Modify userUsage table definition to include: creditsRemaining: v.number() (default 100), creditsTotal: v.number() (default 100), lastCreditReset: v.number() (timestamp). Keep existing fields: userId, aiGenerationCount, subscriptionTier.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 32
          },
          {
            "id": 2,
            "title": "Create credit management backend",
            "description": "Build convex/credits.ts with queries and mutations for credit operations",
            "details": "Create getUserCredits query to fetch current balance. Create deductCredits mutation with atomic operations and validation (check balance >= amount). Create resetMonthlyCredits mutation to set creditsRemaining back to creditsTotal. Create checkAndResetCredits helper that auto-resets if month has passed since lastCreditReset.",
            "status": "done",
            "dependencies": [
              "32.1"
            ],
            "parentTaskId": 32
          },
          {
            "id": 3,
            "title": "Build credit balance UI component",
            "description": "Create credit-balance.tsx component for navbar displaying credits with color-coded warnings",
            "details": "Create components/features/credits/credit-balance.tsx: Display credits in header/navbar with format \"⭐ X credits\", use useQuery(api.credits.getUserCredits), color-coded warnings (green >50, yellow 20-50, red <20), clickable to show breakdown and \"Buy More\" button, show \"Unlimited\" for Pro tier, include Popover or Tooltip with details.",
            "status": "done",
            "dependencies": [
              "32.2"
            ],
            "parentTaskId": 32
          }
        ]
      },
      {
        "id": 33,
        "title": "Update Existing Features with Credits",
        "description": "Integrate credit checks and deductions into existing AI project generation and URL scraping features",
        "details": "Modify convex/ai.ts generateProject action to check for 15 credits before execution and deduct after success. Modify scrapeUrl action to check for 5 credits and deduct after scrape. Update generate-dialog.tsx to show credit cost preview and disable button if insufficient credits.",
        "testStrategy": "Test generation with sufficient credits, test blocking when insufficient, verify credit deduction accuracy",
        "status": "done",
        "dependencies": [
          32
        ],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 34,
        "title": "Chat Database Schema",
        "description": "Create database schema for chat sessions and messages with proper indexes",
        "details": "Update convex/schema.ts to add chatSessions table (userId, displayId, title, createdAt, updatedAt, messageCount) and chatMessages table (sessionId, userId, role, content, tokens, creditsUsed, createdAt). Add indexes: by_userId, by_displayId, by_sessionId, by_userId_and_updatedAt. Update convex/counters.ts to add 'chatSessions': 'CH' prefix mapping.",
        "testStrategy": "Verify schema compiles, test display ID generation for chat sessions, verify indexes are created",
        "status": "done",
        "dependencies": [
          32
        ],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 35,
        "title": "Chat Backend Logic",
        "description": "Implement chat session management, message storage, AI chat action, and context integration",
        "details": "Create convex/chatSessions.ts with createSession, getSessions, getSession, deleteSession, updateSessionTitle. Create convex/chatMessages.ts with getMessages, saveMessage. Create convex/chat.ts with sendChatMessage action (credit validation, Azure OpenAI call, context inclusion). Create convex/chatContext.ts to fetch user's projects and tasks for AI context.",
        "testStrategy": "Test CRUD operations for sessions and messages, test AI response generation, verify context inclusion works, test credit deduction",
        "status": "done",
        "dependencies": [
          34
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "Create chat session management (chatSessions.ts)",
            "description": "Implement CRUD operations for chat sessions",
            "details": "Create convex/chatSessions.ts with: createSession mutation (generate displayId, set initial title), getSessions query (list user's sessions, paginated, sorted by updatedAt), getSession query (fetch single session by ID or displayId), deleteSession mutation, updateSessionTitle mutation for renaming.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 35
          },
          {
            "id": 2,
            "title": "Create message storage (chatMessages.ts)",
            "description": "Implement message queries and mutations",
            "details": "Create convex/chatMessages.ts with: getMessages query (fetch all messages for a session, ordered by createdAt), saveMessage mutation (save user or assistant message with role, content, tokens, creditsUsed), deleteMessage mutation (for message removal if needed).",
            "status": "done",
            "dependencies": [
              "35.1"
            ],
            "parentTaskId": 35
          },
          {
            "id": 3,
            "title": "Create user context aggregation (chatContext.ts)",
            "description": "Build helper to fetch user's projects and tasks for AI context",
            "details": "Create convex/chatContext.ts with getUserContext internal query that: fetches user's recent projects (last 5 active), fetches user's pending/in-progress tasks, formats data as structured context string, returns formatted context for system message inclusion. Keep context concise (<2000 chars).",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 35
          },
          {
            "id": 4,
            "title": "Implement sendChatMessage action",
            "description": "Create main AI chat action with Azure OpenAI integration",
            "details": "Create convex/chat.ts with sendChatMessage action: 1) Check user credits >= 3, 2) Get conversation history (last 10 messages), 3) Optionally get user context if includeContext=true, 4) Build messages array for Azure OpenAI, 5) Call Azure OpenAI API with o1-mini model, 6) Save user message and assistant response via chatMessages mutations, 7) Deduct 3 credits via credits mutation, 8) Update session updatedAt timestamp, 9) Return response + new credit balance.",
            "status": "done",
            "dependencies": [
              "35.2",
              "35.3"
            ],
            "parentTaskId": 35
          }
        ]
      },
      {
        "id": 36,
        "title": "Chat Frontend UI",
        "description": "Build complete chat interface with session sidebar, message area, input component, and empty state",
        "details": "Create routes/_authenticated/chat.tsx with sidebar layout. Build components/features/chat/chat-session-list.tsx (new chat button, session switching, rename/delete). Build chat-messages.tsx (role-based styling, auto-scroll). Build chat-input.tsx (auto-resize textarea, credit indicator, context toggle). Build chat-empty-state.tsx with suggested prompts.",
        "testStrategy": "Test session creation/switching, test message sending, verify UI responsive on mobile, test keyboard shortcuts",
        "status": "done",
        "dependencies": [
          35
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "Create chat route with layout",
            "description": "Build main chat page route with sidebar layout structure",
            "details": "Create routes/_authenticated/chat.tsx with two-column layout: left sidebar (30% width) for session list, right main area (70%) for active chat. Use ResizablePanel from shadcn/ui for adjustable split. Add state management for activeSessionId. Handle empty state when no session selected.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 36
          },
          {
            "id": 2,
            "title": "Build chat session list component",
            "description": "Create session sidebar with new chat button, session items, and actions",
            "details": "Create components/features/chat/chat-session-list.tsx: Display list of sessions using useSuspenseQuery(api.chatSessions.getSessions), \"New Chat\" button at top, clickable session items showing title and timestamp, hover actions for rename and delete, highlight active session, handle empty state with prompt to start first chat.",
            "status": "done",
            "dependencies": [
              "36.1"
            ],
            "parentTaskId": 36
          },
          {
            "id": 3,
            "title": "Build chat messages area component",
            "description": "Create message display area with role-based styling and auto-scroll",
            "details": "Create components/features/chat/chat-messages.tsx: Fetch messages with useSuspenseQuery(api.chatMessages.getMessages, {sessionId}), display messages in scrollable container, user messages right-aligned with blue background, assistant messages left-aligned with gray background, auto-scroll to bottom on new messages, show timestamps on hover, loading skeleton while fetching.",
            "status": "done",
            "dependencies": [
              "36.1"
            ],
            "parentTaskId": 36
          },
          {
            "id": 4,
            "title": "Build chat input component",
            "description": "Create message input with auto-resize, credit indicator, and context toggle",
            "details": "Create components/features/chat/chat-input.tsx: Auto-resizing Textarea (max 5 lines), Send button with Loader2 icon when loading, disabled when no credits or empty text, credit cost indicator \"3 credits per message\", keyboard shortcuts (Enter to send, Shift+Enter for newline), checkbox for \"Include my projects/tasks as context\", use useAction(api.chat.sendChatMessage) for sending, show error toasts on failure.",
            "status": "done",
            "dependencies": [
              "36.1"
            ],
            "parentTaskId": 36
          },
          {
            "id": 5,
            "title": "Create chat empty state component",
            "description": "Build empty state with suggested prompts and quick start guide",
            "details": "Create components/features/chat/chat-empty-state.tsx: Display when no session is selected, show welcome message \"Start a new conversation\", suggested prompt buttons: \"Help me plan a project\", \"What should I work on next?\", \"Explain my current tasks\", clicking a prompt creates new session and sends message, include brief explanation of context toggle feature, visually appealing with icon and centered layout.",
            "status": "done",
            "dependencies": [
              "36.1"
            ],
            "parentTaskId": 36
          }
        ]
      },
      {
        "id": 37,
        "title": "Streaming Responses Implementation",
        "description": "Implement polling-based streaming for real-time message display as tokens arrive",
        "details": "Create convex/chatStreaming.ts with startStreamingMessage, appendStreamChunk, finalizeStreamMessage mutations. Update chat action to batch-update message every 50ms or 10 tokens during generation. Update chat-messages.tsx to poll for updates and display partial content with typing indicator.",
        "testStrategy": "Test streaming with various message lengths, verify no duplicate tokens, test interruption handling, measure latency",
        "status": "done",
        "dependencies": [
          36
        ],
        "priority": "medium",
        "subtasks": [
          {
            "id": 1,
            "title": "Create streaming mutations",
            "description": "Build mutations for managing streaming message state",
            "details": "Create convex/chatStreaming.ts with: startStreamingMessage mutation (creates placeholder message with isStreaming=true flag), appendStreamChunk mutation (appends tokens to message content), finalizeStreamMessage mutation (marks message as complete, sets isStreaming=false, adds final token count). All mutations validate user owns the session.",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 37
          },
          {
            "id": 2,
            "title": "Update chat action for streaming",
            "description": "Modify sendChatMessage action to support token-by-token streaming",
            "details": "Update convex/chat.ts sendChatMessage action: 1) Call startStreamingMessage to create placeholder, 2) Use Azure OpenAI streaming API (stream: true), 3) Accumulate tokens in batches (every 10 tokens or 50ms), 4) Call appendStreamChunk mutation for each batch, 5) After stream completes, call finalizeStreamMessage, 6) Handle errors and cleanup incomplete streams, 7) Return messageId for frontend polling.",
            "status": "done",
            "dependencies": [
              "37.1"
            ],
            "parentTaskId": 37
          },
          {
            "id": 3,
            "title": "Implement frontend streaming polling",
            "description": "Add polling logic to chat-messages.tsx for real-time updates",
            "details": "Update components/features/chat/chat-messages.tsx: Detect messages with isStreaming=true flag, poll for updates every 100ms using useQuery with refetchInterval, display partial content with typing indicator (...), stop polling when isStreaming=false, show \"Generating...\" status while streaming, auto-scroll to bottom as content updates, handle interrupted streams gracefully.",
            "status": "done",
            "dependencies": [
              "37.2"
            ],
            "parentTaskId": 37
          }
        ]
      },
      {
        "id": 38,
        "title": "Credit Purchase Integration",
        "description": "Integrate Autumn for credit purchases with packages and Pro plan",
        "details": "Update routes/_authenticated/pricing.tsx with credit packages (500/$5, 1000/$9, 5000/$40). Create components/features/credits/purchase-credits-dialog.tsx with package selection and Autumn checkout integration. Create convex/webhooks/autumn.ts to handle purchase events and add credits. Implement Pro plan check for unlimited credits.",
        "testStrategy": "Test purchase flow end-to-end, verify credits added after payment, test Pro plan unlimited credits, test webhook reliability",
        "status": "pending",
        "dependencies": [
          32
        ],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 39,
        "title": "Integration and Polish",
        "description": "Integrate chat into navigation, dashboard, and add credit warnings with mobile responsiveness",
        "details": "Update components/layout/data/sidebar-data.tsx to add 'Chat AI' navigation with MessageSquare icon. Update routes/_authenticated/dashboard.tsx to add 'Quick Chat' card showing recent sessions. Implement credit warning toasts when balance drops below 20. Create blocking dialog for insufficient credits with 'Buy More' CTA. Ensure mobile responsiveness with collapsible session sidebar.",
        "testStrategy": "Test navigation works, verify dashboard integration, test warnings and blocking dialogs, verify mobile UI",
        "status": "pending",
        "dependencies": [
          36,
          38
        ],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 40,
        "title": "Chat AI Testing and Quality Assurance",
        "description": "Comprehensive testing of chat functionality, credit system, and edge cases",
        "details": "Test complete chat flow: create session, send messages, verify credit deduction. Test context inclusion with user projects and tasks. Verify monthly credit reset logic. Test insufficient credit scenarios and purchase flow. Test edge cases: long messages (>2000 chars), empty sessions, concurrent sends, credit race conditions. Verify streaming works correctly. Test mobile responsiveness thoroughly.",
        "testStrategy": "Execute comprehensive test matrix, document bugs found, verify fixes, perform regression testing",
        "status": "pending",
        "dependencies": [
          37,
          39
        ],
        "priority": "high",
        "subtasks": []
      }
    ],
    "metadata": {
      "version": "1.0.0",
      "createdAt": "2025-01-09",
      "projectName": "AI-Powered Project Generation Feature",
      "totalTasks": 12,
      "source": "AI-PRD.md - Comprehensive Product Requirements Document",
      "created": "2025-11-09T15:28:04.519Z",
      "description": "Tasks for master context",
      "updated": "2025-11-14T16:48:36.100Z"
    }
  }
}